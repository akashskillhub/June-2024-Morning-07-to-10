import{i as Y,j as e,k as B,r as b,l as D,m as I,n as U,y as _,o as A,p as z}from"./index-5ea37ea9.js";import{u as f,c as v,a as r,h as o,b as G}from"./handleClasses-fff7ae3c.js";const J=()=>{const[h,{isSuccess:g}]=Y(),n=f({initialValues:{mobile:"",address:"",city:"",certificate:"",type:"",hero:"",startTime:"",endTime:""},validationSchema:v({mobile:r().required("Enter  mobile"),address:r().required("Enter  address"),city:r().required("Enter  city"),certificate:r().required("Enter  certificate"),type:r().required("Enter  type"),hero:r().required("Enter  hero"),startTime:r().required("Enter  startTime"),endTime:r().required("Enter  endTime")}),onSubmit:(c,{resetForm:i})=>{const j=new FormData;for(const p in c)j.append(p,c[p]);h(j),i()}});return e.jsxs("form",{onSubmit:n.handleSubmit,children:[e.jsx("pre",{children:JSON.stringify(n.errors,null,2)}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Signup"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"mobile",className:"form-label",children:" mobile"}),e.jsx("input",{...n.getFieldProps("mobile"),type:"text",className:o(n,"mobile"),id:"mobile",placeholder:"enter Your mobile"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.mobile})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"address",className:"form-label",children:" address"}),e.jsx("textarea",{...n.getFieldProps("address"),type:"text",className:o(n,"address"),id:"address",placeholder:"Enter Your address"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.address})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"city",className:"form-label",children:" city"}),e.jsx("input",{...n.getFieldProps("city"),type:"text",className:o(n,"city"),id:"city",placeholder:"Enter Your city"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.city})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"certificate",className:"form-label",children:" certificate"}),e.jsx("input",{type:"file",onChange:c=>n.setFieldValue("certificate",c.target.files[0]),className:o(n,"certificate"),id:"certificate",placeholder:"Enter Your certificate"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.certificate})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"type",className:"form-label",children:" type"}),e.jsxs("select",{...n.getFieldProps("type"),className:o(n,"type"),children:[e.jsx("option",{selected:!0,children:"Choose Type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non-veg"})]}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.type})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"hero",className:"form-label",children:" hero"}),e.jsx("input",{onChange:c=>n.setFieldValue("hero",c.target.files[0]),type:"file",className:o(n,"hero"),id:"hero",placeholder:"Confirm Your hero"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.hero})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"startTime",className:"form-label",children:" startTime"}),e.jsx("input",{...n.getFieldProps("startTime"),type:"time",className:o(n,"startTime"),id:"startTime",placeholder:"Confirm Your startTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.startTime})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{for:"endTime",className:"form-label",children:" endTime"}),e.jsx("input",{...n.getFieldProps("endTime"),type:"time",className:o(n,"endTime"),id:"endTime",placeholder:"Confirm Your endTime"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:n.errors.endTime})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:"Update Info"})]})]})})})})]})},O=()=>{const[h,{isSuccess:g}]=B(),[n,c]=b.useState(!0),[i,j]=b.useState(),[p,{isSuccess:y}]=D(),[P,{data:N}]=I(),[R,{isSuccess:Q,isError:H,error:K,isLoading:W}]=U(),l=f({initialValues:{menu:[{type:"",category:"",name:"poha",price:"",desc:"",image:""}]},validationSchema:v({menu:G().of(v({type:r().required(),category:r().required(),name:r().required(),price:r().required(),desc:r().required(),image:r().required()}))}),onSubmit:(a,{resetForm:s})=>{console.log(a);const t=new FormData;for(const d of a.menu)for(const x in d)t.append(x,d[x]);R(t),s()}}),m=f({enableReinitialize:!0,initialValues:{type:i?i.type:"",category:i?i.category:"",name:i?i.name:"",price:i?i.price:"",desc:i?i.desc:"",image:""},validationSchema:v({type:r().required(),category:r().required(),name:r().required(),price:r().required(),desc:r().required(),image:r()}),onSubmit:(a,{resetForm:s})=>{const t=new FormData;for(const d in a)t.append(d,a[d]);h({fd:t,_id:i._id}),s()}}),L=()=>{l.setFieldValue("menu",[...l.values.menu,{type:"",category:"",name:"",price:"",desc:"",image:""}])},V=a=>{const s=[...l.values.menu];s.splice(a,1),l.setFieldValue("menu",s)},u=(a,s)=>{var t,d,x,k,C,F,M,S,T,q,E,w;return A({"form-control my-2":!0,"is-invalid":((t=l.touched)==null?void 0:t.menu)&&((x=(d=l.touched)==null?void 0:d.menu[a])==null?void 0:x[s])&&((k=l.errors)==null?void 0:k.menu)&&((F=(C=l.errors)==null?void 0:C.menu[a])==null?void 0:F[s]),"is-valid":((M=l.touched)==null?void 0:M.menu)&&((T=(S=l.touched)==null?void 0:S.menu[a])==null?void 0:T[s])&&((q=l.errors)==null?void 0:q.menu)&&!((w=(E=l.errors)==null?void 0:E.menu[a])!=null&&w[s])})},$=(a,s)=>{const{files:t}=s.target;l.setFieldValue(`menu[${a}].image`,t[0])};return b.useEffect(()=>{P()},[]),b.useEffect(()=>{y&&_.success("menu delete success")},[y]),e.jsxs(e.Fragment,{children:[e.jsx("form",{onSubmit:l.handleSubmit,children:e.jsxs("div",{className:"container",children:[l.values.menu.map((a,s)=>e.jsxs("div",{className:"card my-3",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between",children:[e.jsxs("span",{children:[" Menu ",s+1]}),s===0?e.jsx("button",{className:"btn btn-sm btn-dark",type:"button",onClick:L,children:"add"}):e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:t=>V(s),children:"remove"})]}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-4",children:e.jsxs("select",{className:u(s,"type"),name:`menu[${s}].type`,onChange:l.handleChange,onBlur:l.handleBlur,value:l.values.menu[s].type,children:[e.jsx("option",{value:"",children:"choose type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non veg"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsxs("select",{className:u(s,"category"),name:`menu[${s}].category`,onBlur:l.handleBlur,onChange:l.handleChange,value:l.values.menu[s].category,children:[e.jsx("option",{value:"",children:"choose category"}),e.jsx("option",{value:"main",children:"Main Course"}),e.jsx("option",{value:"chinese",children:"Chinese"}),e.jsx("option",{value:"punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{onBlur:l.handleBlur,className:u(s,"name"),name:`menu[${s}].name`,onChange:l.handleChange,defaultValue:l.values.menu[s].name,type:"text"})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{className:u(s,"price"),name:`menu[${s}].price`,onChange:l.handleChange,value:l.values.menu[s].price,type:"number"})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("textarea",{className:u(s,"desc"),name:`menu[${s}].desc`,onChange:l.handleChange,value:l.values.menu[s].desc})}),e.jsx("div",{className:"col-sm-4",children:e.jsx("input",{onChange:t=>$(s,t),className:u(s,"image"),type:"file"})})]})})]},s)),e.jsx("button",{type:"submit",class:"btn btn-primary my-3 w-100 btn-lg",children:"Add Menu"})]})}),e.jsx("div",{className:"container",children:N&&e.jsxs("table",{class:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"name"}),e.jsx("th",{children:"category"}),e.jsx("th",{children:"price"}),e.jsx("th",{children:"desc"}),e.jsx("th",{children:"image"}),e.jsx("th",{children:"type"}),e.jsx("th",{children:"actions"})]})}),e.jsx("tbody",{children:N.result.map(a=>e.jsxs("tr",{className:`${a.type==="veg"?"table-success":"table-danger"}`,children:[e.jsx("td",{children:a.name}),e.jsx("td",{children:a.category}),e.jsx("td",{children:a.price}),e.jsx("td",{children:a.desc}),e.jsx("td",{children:e.jsx("img",{src:a.image,height:50,alt:""})}),e.jsx("td",{children:a.type}),e.jsxs("td",{children:[e.jsx("button",{onClick:s=>j(a),"data-bs-toggle":"modal","data-bs-target":"#editMenu",type:"button",class:"btn btn-outline-warning me-2",children:"Edit"}),e.jsx("button",{onClick:s=>p(a._id),type:"button",class:"btn btn-outline-danger",children:"Remove"})]})]},a._id))})]})}),e.jsx("div",{className:"modal fade",id:"editMenu",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"exampleModalLabel",children:"Edit Menu"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:m.handleSubmit,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{...m.getFieldProps("type"),className:"form-control my-2",children:[e.jsx("option",{value:"",children:"choose type"}),e.jsx("option",{value:"veg",children:"veg"}),e.jsx("option",{value:"non-veg",children:"non veg"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsxs("select",{...m.getFieldProps("category"),className:"form-control my-2",children:[e.jsx("option",{value:"",children:"choose category"}),e.jsx("option",{value:"main",children:"Main Course"}),e.jsx("option",{value:"chinese",children:"Chinese"}),e.jsx("option",{value:"punjabi",children:"Punjabi"})]})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{...m.getFieldProps("name"),className:"form-control my-2",placeholder:"name",type:"text"})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("input",{...m.getFieldProps("price"),className:"form-control my-2",placeholder:"price",type:"number"})}),e.jsx("div",{className:"col-sm-6",children:e.jsx("textarea",{...m.getFieldProps("desc"),className:"form-control my-2",placeholder:"desc"})}),e.jsx("div",{className:"col-sm-6",children:n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i&&i.image,height:50,alt:""}),e.jsx("button",{onClick:a=>c(!1),type:"button",class:"btn btn-primary btn-sm",children:"Change"})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{onChange:a=>m.setFieldValue("image",a.target.files[0]),className:"form-control my-2",type:"file"}),e.jsx("button",{onClick:a=>c(!0),type:"button",class:"btn btn-primary btn-sm",children:"Cancel"})]})})]}),e.jsx("button",{type:"submit",class:"btn btn-warning w-100 my-3",children:"Update Menu"})]})})]})})})]})},ee=()=>{const{resturant:h}=z(g=>g.auth);return e.jsx(e.Fragment,{children:h.infoComplete?e.jsx(O,{}):e.jsx(J,{})})};export{ee as default};
